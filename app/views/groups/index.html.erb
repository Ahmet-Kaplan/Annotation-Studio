<%= content_for :page_title, 'Groups' %>
<%= content_for :body_id, 'groups' %>
<%= content_for :body_class, 'index' %>
<%= stylesheet_link_tag "groups" %>
<div class="panel panel-default" id="groups-panel">
  <div class="panel-heading">
    <span class="panel-title">Groups</span>
  </div>
  <!-- / .panel-heading -->
  <div class="tab-content">
    <div class="tab-pane no-padding active" id="all">
      <table class="table table-striped table-bordered">
	 	<tr>
  		  <th>Group Name</th>
  		  <th>Role</th>
  		  <th>Owner</th>
  		  <th>Members</th>
  		  <th id="button-column">Actions</th>
		</tr>
          <% @groups.each do |g| %>
        	<tr>
              <td><%= link_to g.name, group_path(id: g.id) %> </td>
              <% myRole = Membership.find_by(group_id: g.id, user_id: current_user.id).role %>
              <td><%= myRole %> </td>
              <td><%= User.find(g.owner_id).first_name_last_initial %> </td>
              <% m = Membership.where(group_id: g.id) %>
              <td><%= m.size %></td>
              <td><% if myRole == "owner" %>
                <button class="editButton" ><%= link_to "Manage", edit_group_path(id: g.id) %></button>
              <%end%>
				</td>
            </tr>
          <% end %>

        </table>
      </div>
    </div>
  </div>
</div>
<!--/.panel-->
